{{define 'graphql_types_backed_by_database_table'
  (filter service.graphql_types_backed_by_database_table '@it.entity.top_level')
~}}
scalar Date
scalar Time
scalar DateTime

"""
The root query schema definition of {{service.name}}
"""
type Query {
  {{#each graphql_types_backed_by_database_table as |type| ~}}
  {{define 'top_level' type.entity}}
  {{lower-camel (plural top_level.name)}}(
    {{#each top_level.stored_properties as |p|}}
    {{lower-camel p.name}}: {{p.class_name}}{{if (eq p.type 'boolean') '' 'SearchInput'}}
    {{/each}}
  ): [{{upper-camel top_level.name}}]!
  numberOf{{upper-camel (plural top_level.name)}}(
    {{#each top_level.stored_properties as |p|}}
    {{lower-camel p.name}}: {{p.class_name}}{{if (eq p.type 'boolean') '' 'SearchInput'}}
    {{/each}}
  ): Int!
  {{define "primary_keys" (filter top_level.properties '@it.primary_key') ~}}
  {{#if primary_keys ~}}
  {{lower-camel top_level.name}}(
    {{#each primary_keys as |pk| ~}}
    {{lower-camel pk.name}}: {{upper-camel pk.class_name}}!
    {{/each}}
  ): {{upper-camel top_level.name}}
  {{/if}}
  {{/each}}
  {{#each service.graphql_types_backed_by_external_rest_resource as |type| ~}}
  """
  {{type.description}}
  """
  {{lower-camel type.name}}: {{upper-camel type.rest_resource.name}}
  {{/each}}
  {{#each service.graphql_types_backed_by_indexed_document as |type| ~}}
  """
  {{type.description}}
  """
  {{lower-camel type.name}}: {{upper-camel type.elasticsearch_index.name}}
  {{/each}}
}
