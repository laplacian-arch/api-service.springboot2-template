{{define "class_name" (concat (upper-camel mybatis_mapper.id) 'Input') ~}}
package {{service.namespace}}.db.{{lower-snake data_model.name}}.{{lower-snake mybatis_mapper.id}}

data class {{class_name}} (
    {{#each mybatis_mapper.parameters as |parameter| ~}}
    val {{lower-camel parameter.name}}: {{parameter.class_name}}{{if parameter.nullable "?" }} = {{trim parameter.default_value}},
    {{/each}}
) {
    companion object {
        fun from(args: Map<String, Any?>): {{class_name}} {
            return {{class_name}}(
                {{#each mybatis_mapper.parameters as |argument| ~}}
                {{define "name" (lower-camel argument.name) ~}}
                {{name}} = args["{{name}}"] as? {{argument.class_name}}{{#if (not argument.nullable)}} ?: {{trim argument.default_value}}{{/if}},
                {{/each}}
            )
        }
    }
}
